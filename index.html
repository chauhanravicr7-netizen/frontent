<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DOCKSIDE | Enterprise Timber ERP</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #0b0f1a; margin: 0; }
        .corporate-card { background: linear-gradient(to bottom, #ffffff 0%, #e2e8f0 100%); border-radius: 4px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); border: 1px solid #94a3b8; max-width: 450px; width: 100%; }
        .corporate-header { background: linear-gradient(180deg, #475569 0%, #1e293b 100%); color: white; padding: 10px 15px; border-top-left-radius: 4px; border-top-right-radius: 4px; font-size: 12px; font-weight: 800; display: flex; justify-content: space-between; }
        .form-row { display: flex; align-items: center; margin-bottom: 12px; gap: 10px; }
        .form-label { width: 110px; font-size: 11px; font-weight: 800; color: #334155; text-transform: uppercase; }
        .form-input { flex: 1; padding: 5px 8px; border: 1px solid #94a3b8; font-size: 13px; color: #000; border-radius: 2px; }
        .corporate-btn { background: linear-gradient(to bottom, #f8fafc 0%, #cbd5e1 100%); border: 1px solid #64748b; padding: 8px 20px; font-weight: 900; font-size: 11px; color: #1e293b; cursor: pointer; }
    </style>
</head>
<body class="antialiased">

<div id="app">
    <div class="min-h-screen flex flex-col lg:flex-row">
        <div class="hidden lg:flex lg:w-1/2 relative overflow-hidden bg-black">
            <img src="https://images.unsplash.com/photo-1589939705384-5185137a7f0f?q=80&w=2070&auto=format&fit=crop" class="absolute inset-0 w-full h-screen object-cover opacity-40">
            <div class="relative z-10 p-20 flex flex-col justify-center h-screen">
                <h1 class="text-6xl font-black text-white mb-8 italic">DOCKSIDE</h1>
                <div class="space-y-10">
                    <div class="border-l-4 border-amber-600 pl-6"><p class="text-2xl text-slate-200 italic font-light">"Transparency is the grain of our business."</p></div>
                    <div class="border-l-4 border-amber-600 pl-6"><p class="text-2xl text-slate-200 italic font-light">"Precision in every measurement."</p></div>
                </div>
            </div>
        </div>

        <div class="flex-1 flex items-center justify-center p-6 bg-[#0b0f1a]">
            <div class="corporate-card">
                <div class="corporate-header"><span>USER LOGIN</span><span class="text-amber-500">GANDHIDHAM HUB</span></div>
                <form id="loginForm" class="p-8">
                    <div class="form-row"><label class="form-label">Login ID</label><input type="email" id="email" required class="form-input" value="demo@dockside.com"></div>
                    <div class="form-row"><label class="form-label">Password</label><input type="password" id="password" required class="form-input" value="demo123456"></div>
                    <div class="form-row">
                        <label class="form-label">User Type</label>
                        <select id="userType" class="form-input"><option value="admin">Admin</option><option value="buyer">Buyer</option></select>
                    </div>
                    <div id="status" class="text-[10px] text-center font-black py-4 text-slate-500 uppercase">System Ready</div>
                    <div id="debugInfo" class="hidden text-[9px] bg-red-900/20 text-red-400 p-2 mb-4 border border-red-900/50 rounded"></div>
                    <div class="flex justify-center gap-4 border-t border-slate-300 pt-6">
                        <button type="submit" id="loginBtn" class="corporate-btn">LOGIN</button>
                        <button type="button" onclick="location.reload()" class="corporate-btn">CANCEL</button>
                    </div>
                    <div class="mt-4 text-center">
                        <button type="button" onclick="renderDashboard('demo@dockside.com')" class="text-[9px] text-slate-500 underline uppercase tracking-widest opacity-30 hover:opacity-100">Force Dashboard</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    const API_URL = 'https://dockside-api.onrender.com';

    document.getElementById('loginForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        const btn = document.getElementById('loginBtn');
        const status = document.getElementById('status');
        const debug = document.getElementById('debugInfo');
        
        btn.disabled = true;
        status.innerText = "AUTHENTICATING...";
        debug.classList.add('hidden');

        try {
            const res = await fetch(`${API_URL}/api/auth/login`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ 
                    email: document.getElementById('email').value, 
                    password: document.getElementById('password').value 
                })
            });
            const data = await res.json();
            if (res.ok) {
                localStorage.setItem('token', data.token);
                localStorage.setItem('email', data.email || 'Admin');
                renderDashboard(data.email || 'Admin');
            } else { throw new Error(data.error || "Access Denied"); }
        } catch (err) {
            console.error(err);
            status.innerText = "CONNECTION FAILED";
            debug.innerText = `ERROR: ${err.message}. If Health is OK, this is likely a CORS block.`;
            debug.classList.remove('hidden');
            btn.disabled = false;
        }
    });

    function renderDashboard(email) {
        document.getElementById('app').innerHTML = `
            <div class="flex h-screen bg-[#0b0f1a]">
                <nav class="w-72 bg-[#0d121f] border-r border-slate-800/50 flex flex-col p-8">
                    <h2 class="text-2xl font-black text-white italic mb-10">DOCKSIDE.</h2>
                    <button class="w-full text-left p-4 rounded bg-white/5 text-white text-xs font-bold uppercase border-l-4 border-amber-600">üè† Dashboard</button>
                    <button onclick="localStorage.clear(); location.reload();" class="mt-auto text-red-500 text-xs font-bold uppercase">Sign Out</button>
                </nav>
                <main class="flex-1 p-12 overflow-y-auto">
                    <header class="flex justify-between items-center mb-10">
                        <h3 class="text-lg font-black text-white uppercase tracking-widest">Executive Terminal</h3>
                        <span class="text-[10px] font-black text-green-500 bg-green-500/10 px-4 py-2 rounded-full border border-green-500/20 uppercase tracking-[0.2em]">‚óè Operational</span>
                    </header>
                    <div class="grid grid-cols-3 gap-8 text-white">
                        <div class="bg-slate-900/50 p-8 rounded border border-white/10 shadow-xl"><p class="text-[10px] text-slate-500 font-bold mb-2 uppercase">Stock Value</p><p class="text-3xl font-black">$1.2M</p></div>
                        <div class="bg-slate-900/50 p-8 rounded border border-white/10 shadow-xl"><p class="text-[10px] text-slate-500 font-bold mb-2 uppercase">Open Orders</p><p class="text-3xl font-black">24</p></div>
                        <div class="bg-amber-600/10 p-8 rounded border-l-8 border-amber-600 shadow-xl"><p class="text-[10px] text-amber-500 font-bold mb-2 uppercase">Transit Volume</p><p class="text-3xl font-black">450 m¬≥</p></div>
                    </div>
                </main>
            </div>`;
    }

    window.onload = () => { if(localStorage.getItem('token')) renderDashboard(localStorage.getItem('email')); };
</script>
</body>
</html>
