<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DOCKSIDE | Timber Operating System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        :root { --bg: #0b0c10; --panel: #17191e; --amber: #d97706; }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg); color: #e5e7eb; overflow-x: hidden; }
        .glass { background: rgba(23, 25, 30, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.05); }
        .amber-glow:focus { box-shadow: 0 0 0 2px rgba(217, 119, 6, 0.2); border-color: var(--amber); }
        .loading-bar { height: 2px; background: var(--amber); position: fixed; top: 0; left: 0; transition: width 0.3s; z-index: 9999; }
        /* Professional Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: var(--bg); }
        ::-webkit-scrollbar-thumb { background: #2d3139; border-radius: 10px; }
    </style>
</head>
<body>
    <div id="loadingBar" class="loading-bar" style="width: 0%"></div>

    <div id="app">
        <div id="loginPage" class="flex min-h-screen items-center justify-center p-6">
            <div class="w-full max-w-md space-y-8">
                <div class="text-center">
                    <div class="inline-flex items-center justify-center w-16 h-16 bg-white/5 rounded-xl border border-white/10 mb-6">
                        <span class="text-3xl">ðŸªµ</span>
                    </div>
                    <h1 class="text-2xl font-extrabold uppercase tracking-widest text-white">Dockside</h1>
                    <p class="text-gray-500 text-sm mt-2 uppercase tracking-tighter">Timber Business Operating System</p>
                </div>

                <div class="glass p-8 rounded-2xl space-y-6">
                    <form id="loginForm" class="space-y-5">
                        <div>
                            <label class="block text-[10px] uppercase tracking-widest text-gray-500 mb-2 font-bold">Identity / Email</label>
                            <input type="email" id="email" placeholder="executive@dockside.com" 
                                class="w-full bg-black/40 px-4 py-3 rounded-lg border border-white/5 outline-none amber-glow transition-all text-sm" required>
                        </div>
                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <label class="block text-[10px] uppercase tracking-widest text-gray-500 font-bold">Access Key</label>
                                <a href="#" class="text-[10px] text-amber-600 uppercase font-bold hover:text-amber-500">Reset</a>
                            </div>
                            <input type="password" id="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" 
                                class="w-full bg-black/40 px-4 py-3 rounded-lg border border-white/5 outline-none amber-glow transition-all text-sm" required>
                        </div>

                        <div id="error" class="hidden text-xs text-red-400 bg-red-400/10 p-3 rounded border border-red-400/20 italic"></div>

                        <button type="submit" id="loginBtn" class="w-full bg-amber-700 hover:bg-amber-600 text-white font-bold py-3 rounded-lg transition-all flex items-center justify-center gap-2 group">
                            <span id="btnText">AUTHENTICATE</span>
                            <div id="btnSpinner" class="hidden w-4 h-4 border-2 border-white/20 border-t-white rounded-full animate-spin"></div>
                        </button>
                    </form>
                </div>
                <p class="text-center text-[10px] text-gray-600 uppercase tracking-widest">Authorized Personnel Only â€¢ IP: Logging Active</p>
            </div>
        </div>
    </div>

    <script>
        const API_URL = 'https://dockside-api.onrender.com';
        const loadingBar = document.getElementById('loadingBar');

        function setLoader(percent) {
            loadingBar.style.width = percent + '%';
            if(percent === 100) setTimeout(() => loadingBar.style.width = '0%', 500);
        }

        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const btn = document.getElementById('loginBtn');
            const spinner = document.getElementById('btnSpinner');
            const btnText = document.getElementById('btnText');
            const errorDiv = document.getElementById('error');

            // Start Loading State
            errorDiv.classList.add('hidden');
            btn.disabled = true;
            spinner.classList.remove('hidden');
            btnText.innerText = 'WAKING SERVER...';
            setLoader(30);

            try {
                const response = await fetch(`${API_URL}/api/auth/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password })
                });

                setLoader(70);
                const data = await response.json();

                if (response.ok) {
                    setLoader(100);
                    localStorage.setItem('token', data.token);
                    showDashboard(data, email);
                } else {
                    throw new Error(data.error || 'Authentication Failed');
                }
            } catch (error) {
                setLoader(0);
                errorDiv.innerText = error.message;
                errorDiv.classList.remove('hidden');
                btnText.innerText = 'AUTHENTICATE';
            } finally {
                btn.disabled = false;
                spinner.classList.add('hidden');
            }
        });

        function showDashboard(user, email) {
            document.getElementById('app').innerHTML = `
                <div class="flex h-screen overflow-hidden">
                    <aside class="w-64 glass border-r border-white/5 flex flex-col">
                        <div class="p-6 border-b border-white/5">
                            <h1 class="text-lg font-black tracking-tighter text-white">DOCKSIDE <span class="text-amber-600">.</span></h1>
                        </div>
                        <nav class="flex-1 p-4 space-y-2 overflow-y-auto">
                            <div class="text-[10px] text-gray-500 font-bold uppercase tracking-widest mb-4 px-2">Core System</div>
                            <a href="#" class="flex items-center gap-3 px-3 py-2 bg-white/5 rounded-lg text-white border border-white/10 text-sm">ðŸ“Š Dashboard</a>
                            <a href="#" class="flex items-center gap-3 px-3 py-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition text-sm">ðŸ“¦ Inventory</a>
                            <a href="#" class="flex items-center gap-3 px-3 py-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition text-sm">ðŸš› Logistics</a>
                            <a href="#" class="flex items-center gap-3 px-3 py-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition text-sm">ðŸ“‘ Orders</a>
                        </nav>
                        <div class="p-4 border-t border-white/5">
                            <div class="flex items-center gap-3 p-2 rounded-lg bg-black/20">
                                <div class="w-8 h-8 rounded bg-amber-700 flex items-center justify-center text-xs font-bold text-white uppercase">${email[0]}</div>
                                <div class="flex-1 truncate">
                                    <div class="text-xs font-bold text-white truncate">${email}</div>
                                    <div class="text-[9px] text-gray-500 uppercase tracking-tighter">Admin Access</div>
                                </div>
                            </div>
                        </div>
                    </aside>

                    <main class="flex-1 flex flex-col overflow-hidden">
                        <header class="h-16 glass border-b border-white/5 flex items-center justify-between px-8">
                            <div class="flex items-center gap-4">
                                <span class="text-[10px] bg-green-500/10 text-green-500 px-2 py-0.5 rounded border border-green-500/20 font-bold uppercase tracking-widest">System Healthy</span>
                                <span class="text-gray-600">/</span>
                                <span class="text-gray-400 text-xs">Overview</span>
                            </div>
                            <div class="flex items-center gap-6">
                                <div class="text-gray-500 text-[10px] uppercase font-bold tracking-widest">Press <kbd class="bg-white/10 px-1.5 py-0.5 rounded text-white border border-white/10">Ctrl + K</kbd> to search</div>
                            </div>
                        </header>

                        <section class="flex-1 overflow-y-auto p-8 space-y-8">
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                                ${['Active Orders', 'Timber Volume', 'Revenue (YTD)', 'Shipments'].map(label => `
                                    <div class="glass p-6 rounded-xl relative overflow-hidden group">
                                        <div class="text-[10px] text-gray-500 font-bold uppercase tracking-widest mb-1">${label}</div>
                                        <div class="text-2xl font-black text-white tracking-tighter">-- --</div>
                                        <div class="absolute bottom-0 left-0 h-1 bg-amber-700 w-0 group-hover:w-full transition-all duration-500"></div>
                                    </div>
                                `).join('')}
                            </div>

                            <div class="glass rounded-xl overflow-hidden">
                                <div class="p-6 border-b border-white/5 flex justify-between items-center bg-white/2">
                                    <h3 class="text-[10px] text-gray-400 font-bold uppercase tracking-widest">Real-time Stock Movement</h3>
                                    <button class="text-[10px] text-amber-600 uppercase font-bold hover:underline">View All Records</button>
                                </div>
                                <table class="w-full text-left">
                                    <thead class="bg-black/40 text-[9px] text-gray-500 uppercase tracking-widest">
                                        <tr>
                                            <th class="px-6 py-4">Serial ID</th>
                                            <th class="px-6 py-4">Species / Grade</th>
                                            <th class="px-6 py-4">Volume (mÂ³)</th>
                                            <th class="px-6 py-4">Status</th>
                                        </tr>
                                    </thead>
                                    <tbody class="text-xs">
                                        <tr><td colspan="4" class="px-6 py-12 text-center text-gray-600 italic uppercase tracking-widest">No active telemetry found...</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </section>
                    </main>
                </div>
            `;
        }
    </script>
</body>
</html>
